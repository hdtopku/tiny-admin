version: '3.8'  # Define the Docker Compose version

services:
  springboot:
    build:
      context: .  # set the build context to the current directory
      dockerfile: Dockerfile
    container_name: tiny_admin
    volumes:
      - .:/usr/src/app/temp  # map the current directory to the container's /usr/src/app directory
      - ~/.m2/repository:/root/.m2/repository
    working_dir: /usr/src/app
    command: java -jar tiny-admin-starter.jar
    ports:
      - "8080:8080"
    networks:
      - my_network
    environment:
      - SPRING_PROFILES_ACTIVE=prod
    restart: always

networks:
  my_network:
    name: my_network